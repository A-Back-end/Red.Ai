# AI Design System Documentation

## Обзор

Red.AI Design System - это интеллектуальная система генерации фотореалистичных интерьерных визуализаций, которая учитывает бюджетные ограничения, стиль, тип помещения и другие параметры пользователя.

## Архитектура системы

### 1. Frontend: FluxDesigner Component
- **Файл**: `components/dashboard/FluxDesigner.tsx`
- **Описание**: 3-этапный интерфейс для создания дизайна
- **Этапы**:
  1. Загрузка основного изображения
  2. Добавление 2D элементов (опционально)
  3. Настройка параметров генерации

### 2. Backend: API Endpoint
- **Файл**: `app/api/generate-design/route.ts`
- **Описание**: Обрабатывает запросы на генерацию дизайна
- **Внешний сервис**: BFL.ai (Flux-Kontext-Pro)

### 3. Utils: Prompt Generator
- **Файл**: `utils/promptGenerator.ts`
- **Описание**: Создает оптимизированные промпты для AI

## Параметры генерации

### Обязательные параметры:
- `prompt` - описание желаемого дизайна от пользователя
- `imageBase64` - загруженное изображение помещения (optional)

### Дополнительные параметры:
- `style` - стиль интерьера (modern, minimalist, classic, loft, scandinavian)
- `roomType` - тип помещения (living-room, bedroom, kitchen, bathroom, office)
- `temperature` - тип визуализации (SketchUp, 3D, Rooming)
- `budget` - бюджет проекта в долларах ($500-$50,000)
- `link` - ссылка на референсное изображение (optional)

## Логика бюджета

### Диапазоны бюджета:

#### 1. Эконом (< $1,000)
- **Материалы**: Простая покраска, недорогие обои, ламинат
- **Мебель**: 1-2 базовых предмета (IKEA, подержанные)
- **Освещение**: Простой светильник
- **Декор**: Минимум декора

#### 2. Средний класс ($1,000 - $7,000)
- **Материалы**: Качественная краска, акцентные обои, керамическая плитка
- **Мебель**: Полный набор мебели среднего сегмента
- **Освещение**: Хорошее базовое освещение
- **Декор**: Ковер, шторы, картины

#### 3. Премиум ($7,000 - $20,000)
- **Материалы**: Паркетная доска, натуральный камень
- **Мебель**: Брендовая мебель высокого сегмента
- **Освещение**: Дизайнерское освещение
- **Декор**: Качественный текстиль, предметы искусства

#### 4. Люкс (> $20,000)
- **Материалы**: Мрамор, натуральное дерево, латунь
- **Мебель**: Иконы дизайна, мебель на заказ
- **Освещение**: Системы умного дома
- **Декор**: Кастомные изделия, произведения искусства

## Стили дизайна

### Modern
- Чистые геометрические линии
- Минимум беспорядка
- Нейтральная цветовая палитра
- Современная мебель с металлическими и стеклянными акцентами

### Minimalist
- Только необходимая мебель
- Максимум свободного пространства
- Функциональная красота
- Скрытые системы хранения

### Classic
- Традиционная мебель
- Богатые текстуры (бархат, шелк, кожа)
- Теплые оттенки дерева
- Орнаментальные детали

### Loft
- Индустриальная эстетика
- Открытые кирпичные стены
- Стальные балки
- Сырые материалы

### Scandinavian
- Светлые породы дерева
- Уютный текстиль
- Нейтральные цвета с пастельными акцентами
- Функциональная мебель

## Типы визуализации

### SketchUp
- Характерные четкие линии
- Точная геометрия
- Реалистичные текстуры
- Слегка стилизованный вид

### 3D
- Фотореалистичная архитектурная визуализация
- Идеальное освещение
- Реалистичные тени
- Профессиональное качество

### Rooming
- Детальная планировка помещения
- Точные пропорции
- Пространственные отношения

## Пример использования

```typescript
const designParams = {
  prompt: "Создайте уютную зону для чтения с удобным креслом",
  style: "modern",
  roomType: "living-room",
  temperature: "SketchUp",
  budget: 5000,
  link: "https://example.com/inspiration"
};

const optimizedPrompt = generateOptimizedPrompt(designParams);
```

## Технические требования

### Качество изображения:
- Высокое разрешение
- Профессиональная композиция
- Правильные пропорции и масштаб
- Реалистичные текстуры материалов
- Теплая, уютная атмосфера

### Освещение:
- Естественное освещение
- Правильные тени
- Реалистичная цветопередача
- Фокус на ключевых элементах

### Соответствие бюджету:
- Все материалы и мебель должны соответствовать указанному бюджету
- Избегать предметов, превышающих бюджетный диапазон
- Фокус на достижимых, реалистичных решениях

## API Response Format

```json
{
  "polling_url": "https://api.bfl.ai/v1/polling/[task_id]",
  "status": "Processing"
}
```

## Мониторинг и логи

Система логирует:
- Входящие запросы
- Сгенерированные промпты
- Статус обработки
- Ошибки и исключения

## Безопасность

- Валидация всех входных параметров
- Защита от SQL инъекций
- Ограничение размера файлов
- Таймауты для запросов

## Производительность

- Оптимизация изображений
- Кэширование результатов
- Приоритетная обработка
- Асинхронные запросы 