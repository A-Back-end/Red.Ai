# Google Tag Manager Setup –¥–ª—è Red.AI

## –û–±–∑–æ—Ä

Google Tag Manager (GTM) –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –Ω–∞ —Å–∞–π—Ç–µ Red.AI. GTM ID: `GTM-KMRVH2GD`

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ GTM

GTM –∫–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã:

- `app/layout.tsx` - –æ—Å–Ω–æ–≤–Ω–æ–π layout Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `public/index.html` - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

### 2. –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ç—Ä–µ–∫–∏–Ω–≥–∞

–°–æ–∑–¥–∞–Ω—ã —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è GTM:

- `lib/gtm.ts` - –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–±—ã—Ç–∏–π
- `lib/useGTM.ts` - React —Ö—É–∫–∏ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

## –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ —Å–æ–±—ã—Ç–∏—è

### –°—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- `page_view` - –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç—Ä–∞–Ω–∏—Ü
- `user_interaction` - –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `navigation` - –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ dashboard

### AI —Ñ—É–Ω–∫—Ü–∏–∏
- `ai_feature_usage` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ AI —Ñ—É–Ω–∫—Ü–∏–π
- `dalle_generation` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π DALL-E
- `design_generation` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∏–∑–∞–π–Ω–æ–≤ –∏–Ω—Ç–µ—Ä—å–µ—Ä–∞

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
- `user_registration` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `user_login` - –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- `project_creation` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤
- `project_save` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤

### –ë–∏–∑–Ω–µ—Å –º–µ—Ç—Ä–∏–∫–∏
- `credit_usage` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—Ä–µ–¥–∏—Ç–æ–≤
- `credit_purchase` - –ø–æ–∫—É–ø–∫–∞ –∫—Ä–µ–¥–∏—Ç–æ–≤

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```typescript
import { useGTM } from '@/lib/useGTM'

export function MyComponent() {
  const { trackInteraction, trackAI, trackCustom } = useGTM()
  
  const handleClick = () => {
    trackInteraction('click', 'button', 'cta_button')
  }
  
  return <button onClick={handleClick}>Click me</button>
}
```

### –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ö—É–∫–∏

```typescript
import { useGTMButton, useGTMForm, useGTMAI } from '@/lib/useGTM'

// –î–ª—è –∫–Ω–æ–ø–æ–∫
const { trackClick } = useGTMButton('cta')
trackClick('primary', 'hero_section')

// –î–ª—è —Ñ–æ—Ä–º
const { trackSubmit, trackFieldFocus } = useGTMForm('contact')
trackSubmit('success', 'lead_generation')

// –î–ª—è AI —Ñ—É–Ω–∫—Ü–∏–π
const { trackStart, trackComplete, trackError } = useGTMAI('design_generation')
trackStart({ room_type: 'living_room' })
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ GTM

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤

–°–æ–∑–¥–∞–π—Ç–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã—Ö —Å–æ–±—ã—Ç–∏–π:

- **–í—Å–µ —Å–æ–±—ã—Ç–∏—è AI** - `ai_feature_usage`
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∏–∑–∞–π–Ω–æ–≤** - `design_generation`
- **–ù–∞–≤–∏–≥–∞—Ü–∏—è** - `user_interaction` —Å category = 'navigation'
- **–§–æ—Ä–º—ã** - `user_interaction` —Å category = 'form'

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–≥–æ–≤

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ç–µ–≥–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤:

- **Google Analytics 4** - –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- **Google Ads** - –¥–ª—è —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π
- **Facebook Pixel** - –¥–ª—è —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π
- **Custom HTML** - –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

### 3. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:

- `event` - –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è
- `category` - –∫–∞—Ç–µ–≥–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏—è
- `action` - —Ç–∏–ø –¥–µ–π—Å—Ç–≤–∏—è
- `label` - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –º–µ—Ç–∫–∞
- `value` - —á–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

## –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### Dashboard
- –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —Ä–∞–∑–¥–µ–ª–∞–º–∏
- –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º –∏ —è–∑—ã–∫–æ–≤

### Design Studio
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–∏–∑–∞–π–Ω–∞
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∏–∑–∞–π–Ω–æ–≤
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤

### AI Assistant
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π DALL-E
- –û—à–∏–±–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

### –ü—Ä–æ–µ–∫—Ç—ã
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
- –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤

## –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ Developer Tools (F12)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É Console
3. –í–≤–µ–¥–∏—Ç–µ: `window.dataLayer`
4. –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è –º–∞—Å—Å–∏–≤ —Å —Å–æ–±—ã—Ç–∏—è–º–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–±—ã—Ç–∏–π

–í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–ª—è—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è –≤–∏–¥–∞:
```
üìä GTM Event sent: page_view {page_path: "/dashboard"}
üìä GTM Event sent: ai_feature_usage {feature: "dalle_generation", action: "start"}
```

### GTM Preview Mode

1. –í–æ–π–¥–∏—Ç–µ –≤ GTM
2. –ù–∞–∂–º–∏—Ç–µ "Preview"
3. –í–≤–µ–¥–∏—Ç–µ URL —Å–∞–π—Ç–∞
4. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç –≤ –Ω–æ–≤–æ–º –æ–∫–Ω–µ
5. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- GTM –∫–æ–¥ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
- Noscript fallback –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–µ–∑ JavaScript
- –í—Å–µ —Å–æ–±—ã—Ç–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
- –ù–µ—Ç –ø–µ—Ä–µ–¥–∞—á–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- GTM –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å `strategy="afterInteractive"`
- –°–æ–±—ã—Ç–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ UI
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:

1. **–ö–æ–Ω–≤–µ—Ä—Å–∏–∏**
   - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∏–∑–∞–π–Ω–æ–≤

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ AI**
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–π
   - –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–π
   - –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–∏–ø—ã –¥–∏–∑–∞–π–Ω–æ–≤

3. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ**
   - –í—Ä–µ–º—è –Ω–∞ —Å–∞–π—Ç–µ
   - –ü—É—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

4. **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏**
   - –û—à–∏–±–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
   - –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏
   - –£—Å–ø–µ—à–Ω–æ—Å—Ç—å API –≤—ã–∑–æ–≤–æ–≤ 